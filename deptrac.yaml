deptrac:
  layers:
    ###> Shared ###
    - name: SharedDomain
      collectors:
        - type: directory
          value: src/Shared/Domain/.*
    - name: SharedApplication
      collectors:
        - type: directory
          value: src/Shared/Application/.*
    - name: SharedInfrastructure
      collectors:
        - type: directory
          value: src/Shared/Infrastructure/.*
    ###< Shared ###

    ###> DietPlanner/Shared ###
    - name: DietPlannerSharedDomain
      collectors:
        - type: directory
          value: src/DietPlanner/Shared/Domain/.*
    - name: DietPlannerSharedApplication
      collectors:
        - type: directory
          value: src/DietPlanner/Shared/Application/.*
    - name: DietPlannerSharedInfrastructure
      collectors:
        - type: directory
          value: src/DietPlanner/Shared/Infrastructure/.*
    ###< DietPlanner/Shared ###

    ###> DietPlanner/Ingredient ###
    - name: DietPlannerIngredientDomain
      collectors:
        - type: directory
          value: src/DietPlanner/Ingredient/Domain/.*
    - name: DietPlannerIngredientApplication
      collectors:
        - type: directory
          value: src/DietPlanner/Ingredient/Application/.*
    - name: DietPlannerIngredientInfrastructure
      collectors:
        - type: directory
          value: src/DietPlanner/Ingredient/Infrastructure/.*
    ###< DietPlanner/Ingredient ###

    - name: Composer
      collectors:
        - type: composer
          composerPath: composer.json
          composerLockPath: composer.lock
          packages:
              - doctrine/dbal
              - doctrine/doctrine-bundle
              - doctrine/orm
              - ramsey/uuid
              - symfony/console
              - symfony/dotenv
              - symfony/flex
              - symfony/framework-bundle
              - symfony/messenger
              - symfony/runtime
              - symfony/serializer
              - symfony/twig-bundle
              - symfony/yaml

  ruleset:
    SharedDomain:
      - SharedDomain
    SharedApplication:
      - SharedDomain
      - SharedApplication
    SharedInfrastructure:
      - SharedDomain
      - SharedApplication
      - SharedInfrastructure
      - Composer

    DietPlannerSharedDomain:
      - SharedDomain
      - DietPlannerSharedDomain
    DietPlannerSharedApplication:
      - SharedDomain
      - SharedApplication
      - DietPlannerSharedDomain
      - DietPlannerSharedApplication
    DietPlannerSharedInfrastructure:
      - DietPlannerSharedDomain
      - DietPlannerSharedApplication
      - DietPlannerSharedInfrastructure
      - SharedDomain
      - SharedApplication
      - SharedInfrastructure
      - Composer

    DietPlannerIngredientDomain:
      - SharedDomain
      - DietPlannerSharedDomain
      - DietPlannerIngredientDomain
    DietPlannerIngredientApplication:
      - SharedDomain
      - SharedApplication
      - DietPlannerSharedDomain
      - DietPlannerSharedApplication
      - DietPlannerIngredientDomain
      - DietPlannerIngredientApplication
    DietPlannerIngredientInfrastructure:
      - SharedDomain
      - SharedApplication
      - SharedInfrastructure
      - DietPlannerSharedDomain
      - DietPlannerSharedApplication
      - DietPlannerSharedInfrastructure
      - DietPlannerIngredientDomain
      - DietPlannerIngredientApplication
      - DietPlannerIngredientInfrastructure
      - Composer
